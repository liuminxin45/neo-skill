{
  "version": 1,
  "name": "skill-finder",
  "description": "发现/匹配/安装第三方 skill 库。支持两种模式：(1) 主动搜索（最小两级提问）；(2) 被动推荐（skill-creator 集成）。宁缺毋滥，未达阈值必须拒绝并说明原因。",
  "primary_target": "windsurf",
  "backward_compat": ["claude", "cursor", "github"],
  "questions": [
    "你需要什么能力？（一句话描述目标，例如：需要一个开发 UI/UX 的 skill）",
    "你的技术栈/平台是什么？（如 React/Vue/Next.js/SwiftUI/Flutter/HTML+Tailwind；不确定可回车）",
    "硬约束有哪些？（如不可联网/必须离线/不可修改文件等；无则回车）",
    "你使用哪个 IDE？（默认当前 IDE；不确定可回车）"
  ],
  "triggers": [
    "找第三方 skill",
    "有没有现成的工具",
    "推荐一个能力库",
    "安装第三方能力",
    "search for third-party skill",
    "find existing tools"
  ],
  "freedom_level": "low",
  "workflow": {
    "type": "sequential",
    "steps": [
      {
        "id": "interview",
        "title": "两级提问收集需求",
        "kind": "action",
        "commands": [],
        "notes": "优先少问：先用用户原始请求直接匹配；若已高置信命中则不要反问，直接给出 Top1-3。\n\n若信息不足，仅允许 1 轮补充提问（总问题数<=5），问完立即进入匹配，不要进入第二轮追问。"
      },
      {
        "id": "match",
        "title": "匹配第三方 unit",
        "kind": "action",
        "commands": [
          "python -m skill_finder.cli match --goal \"<goal>\" --ide <ide> --format json"
        ],
        "notes": "优先使用内置第三方 registry（packages/units）作为事实来源进行匹配。\n\n匹配策略：\n- 先从用户 goal 里推断 tags/keywords（如 UI/UX/设计系统/原型/React 等），避免过多追问\n- 两阶段：粗筛（倒排索引或扫描 registry 文件降级）+ 精排（tag/keyword 覆盖率 + IDE 支持 + 约束过滤）\n- 置信度 < 60% 必须拒绝并说明原因\n\n当候选数量较少（例如 <=20）且语义需要判断时，可以把候选摘要（unit name/description/tags/keywords/IDE/README）作为输入交给 AI 做最终判定，但不得捏造“缺少 registry/索引”。"
      },
      {
        "id": "present",
        "title": "展示结果（Top 1-3 或拒绝）",
        "kind": "gate",
        "commands": [],
        "notes": "命中：列出 unit + package + 匹配原因 + README 链接 + 使用方式。\n未命中：明确拒绝原因分类（no_candidates_by_tag/no_ide_support/incompatible_env/insufficient_info）。\n禁止输出不实诊断（例如声称索引文件缺失），除非你已实际检查过本地文件。"
      },
      {
        "id": "install",
        "title": "安装（默认自动/可选手动）",
        "kind": "action",
        "commands": [],
        "notes": "默认：执行 auto_install_cmd 并记录。手动：输出 manual_install_cmd 并记录（executed=false）。详见 references/install-modes.md"
      },
      {
        "id": "record",
        "title": "记录安装行为",
        "kind": "action",
        "commands": [],
        "notes": "写入 ~/.omni-skill/install_records.json（或配置路径）。字段：timestamp/unit_id/package_id/mode/executed/result/error_summary/docs_links"
      },
      {
        "id": "output",
        "title": "输出使用方式",
        "kind": "action",
        "commands": [],
        "notes": "展示 unit.entrypoints（原生命令/参数/示例）+ README 链接 + usage_notes"
      }
    ]
  },
  "references": [
    "references/matching-algorithm.md",
    "references/install-modes.md",
    "references/interview-protocol.md",
    "references/registry-schema.md"
  ],
  "scripts": [],
  "assets": []
}
